<iframe id=ifr sandbox="allow-scripts allow-modals allow-same-origin"></iframe>
<br>
<span id=logEl></span>
<script>
function log (msg)
{
  logEl.append (msg, document.createElement ('br'));
}

let url = (type, content) => URL.createObjectURL (
  new Blob ([content], {type}));

let cssUrl = url ('text/css', '#d1 { color: green; }');
let jsUrl = url ('text/javascript', `
  function clog (msg)
  {
    clogEl.append (msg, document.createElement ('br'));
  }
  try
  {
    let log = parent.log;
    log ('Log entry from child iframe');
  }
  catch (err)
  {
    clog ('Error calling parent log (): "' + err + '" Stack trace: "' + err.stack + '"');
  }

  function childFun (msg) { clog (msg); } 
  `);

let htmlUrl = url ('text/html'. `
  <link rel=stylesheet href=${cssUrl}>
  <script src=${jsUrl} defer><\/script>
  <div id=d1>Div 18</div>
  <span id=clogEl></span>>`);

ifr.src = htmlUrl;
ifr.addEventListener ('load', () =>
{
  try
  {
    let iDoc = ifr.contentDocument;
    log ('ifr.contentDocument.d1: ' + ifr.contentDocument.d1);
    ifr.contentWindow.childFun ('Calling child ifream childFun () from parent window');
  }
  catch (err) { log (`Error "${err}" "${err.stack}"`); }
});
</script>
